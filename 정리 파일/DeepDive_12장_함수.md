### 12.7 다양한 함수의 형태

#### 12.7.1 즉시 실행 함수

함수 정의와 동시에 즉시 호출되는 함수를 즉시 실행 함수라고 한다. 단 한 번만 호출되며 다시 호출할 수 없다.

```javascript
(function() {
	var a = 3;
	var b = 5;
	return a * b;
}())
```

익명 함수를 사용하는 것이 일반적이지만 기명 즉시 실행 함수도 사용할 수 있다. 하지만 `그룹연산자 ()`내의 기명 함수는 함수 선언문이 아니라 함수 리터럴로 평가되기 때문에 함수 외부에서 식별자를 참조할 수 없으므로 즉시 실행 함수를 다시 호출할 수 없다는 것은 동일하다.

```javascript
(function foo(){
	var a = 3;
	var b = 5;
	return a * b;
}());

foo(); // ReferenceError
```

**즉시 실행 함수는 반드시 `그룹연산자 ()`로 감싸야 한다.** 

```javascript
// 1번 케이스
function (){}()

// 함수 선언문은 함수 이름을 생략할 수 없다.


// 2번 케이스
function foo(){}()

// 위와 같이 실행할 경우
// 세미콜론 자동 삽입 기능에 의해 함수 뒤에 ; 가 붙는다
// function foo(){};(); 의 형태가 된다.
// 따라서 함수 선언문 뒤의 ()는 함수 호출 연산자가 아니라 그룹 연산자로 해석되고
// 그룹 연산자에 피연산자가 없기 때문에 에러가 발생한다.
```

그룹 연산자의 피연산자는 값으로 평가되므로 함수를 그룹 연산자로 감싸면 함수 리터럴로 평가되어 함수 객체가 된다.

<br>

즉시 실행 함수도 일반 함수처럼 값을 반환할 수도 있고 인수를 전달할 수도 있다.

```javascript
var res = (function() {
	var a = 3;
	var b = 5;
	return a * b;
}());

var res2 = (function (a, b){
	return a * b;
}(3, 5));
```

<br>

#### 12.7.2 재귀 함수

재귀 함수는 재귀 호출(함수가 자기 자신을 호출)을 수행 하는 함수를 말한다. 함수 이름은 함수 몸체 내부에서만 유효하므로 함수 이름을 사용해 자기 자신을 호출할 수도 있고, 함수 표현식의 경우 식별자로도 재귀 호출을 할 수 있다(단 외부에서 호출할 때는 반드시 식별자로 함수를 호출). 재귀 함수는 자기 자신을 무한 호출하기 때문에 재귀 호출을 멈출 수 있는 **탈출 조건을 반드시 만들어야 한다.**

<br>

재귀 함수는 무한 반복에 빠질 위험이 있기 때문에 재귀 함수를 사용하는 것이 직관적으로 이해하기 쉬울 때만 한정적으로 사용한다.

<br>

#### 12.7.3 중첩 함수

함수 내부에 정의된 함수를 중첩 함수 또는 내부 함수라고 한다. 중첩 함수를 포함하는 함수는 외부 함수 라고 한다. 중첩 함수는 외부 함수 내부에서만 호출할 수 있다.

<br>

#### 12.7.4 콜백 함수

함수의 일부가 다르면 매번 함수를 새롭게 정의해야 한다. 해결 방법으로는 함수를 합성하는 방법이 있다. 공통 로직은 미리 정의해두고, 변경 로직은 추상화해서 전달하는 것이다. 함수는 일급 객체이므로 매개변수를 통해 함수로 전달할 수 있다.

<br>

**함수의 매개변수를 통해 다른 함수 내부로 전달되는 함수를 콜백함수**라고 하며 **매개변수를 통해 함수 외부에서 콜백 함수를. 전달 받은 함수를 고차함수**라고 한다. 고차 함수는 콜백 함수의 호출 시점을 결정해서 호출하며, 콜백 함수에 인수를 전달할 수 있다.

<br>

콜백함수로 전달된 함수 리터럴은 고차 함수가 호출될 때마다 평가되어 함수 객체를 생성하므로, 콜백 함수가 자주 호출되거나 다른 곳에서 호출 될 필요가 있다면 외부에서 콜백 함수를 정의한 뒤 고차 함수에 전달하는 것이 효율적이다.

<br>

콜백 함수는 함수형 프로그래밍 패러다임뿐만 아니라 **비동기 처리**에 활용되는 중요한 패턴이다. 

```javascript
setTimeout(function() {
	console.log('1초 경과');
}, 1000);
```

<br>

콜백 함수는 배열 고차 함수에서도 사용된다.<br>
`map`, `filter`, `reduce`

<br>

#### 12.7.5 순수 함수와 비순수 함수

##### 순수 함수
- 어떤 외부 상태에 의존하지도 변경하지도 않는
- 부수 효과가 없는 함수
- 동일한 인수가 전달되면 언제나 동일한 값을 반환
- 오직 인수에게만 의존해 값을 생성해 반환
- 인수에 의해 반환 값이 달라지므로 일반적으로 하나 이상의 인수를 전달 받는다.

##### 빈순수 함수
- 외부 상태에 의존하거나 외부 상태를 변경하는
- 부수 효과가 있는 함수

<br>

함수가 외부 상태를 변경하면 상태 변화를 추적하기 어렵기 때문에, 순수 함수를 사용하는 것이 좋다.

<br>

**함수형 프로그래밍**은 순수 함수와 보조 함수의 조합을 통해 **외부 상태를 변경하는 부수효과를 최소화해서 불변성을 지향하는 프로그래밍 패러다임**이다.
