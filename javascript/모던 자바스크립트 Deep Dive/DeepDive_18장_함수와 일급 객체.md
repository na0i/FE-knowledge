## 18장 함수와 일급 객체

### 18.1 일급 객체

##### 일급 객체의 조건
- 무명의 리터럴로 생성 가능(런타임에 생성 가능)
- 변수나 자료구조(객체, 배열)에 저장 가능
- 함수의 매개변수로 전달 가능
- 함수의 반환 값으로 사용 가능

자바스크립트의 함수는 위 조건을 모두 만족하므로 일급 객체이다.

```javascript
// 무명의 리터럴로 생성 가능
// 변수나 자료구조에 저장 가능
const increase = function (num) {
	return ++num;
}

// 함수의 매개변수로 전달 가능
const makeCounter(aux) {
	let num = 0;
	
	// 함수의 반환 값으로 사용 가능
	return function() {
		num = aux(num);
		return num;
	}
}

// 함수의 매개변수로 전달 가능
const increaser = makeCounter(increase);
```

**함수가 일급 객체**라는 것은 **함수를 객체와 동일하게 사용할 수 있다**는 의미다.<br>

즉,

- 함수를 값과 동일하게 취급 가능하다.
- 어디서든 리터럴로 정의할 수 있다.
- 함수의 매개변수로 전달 가능하다.
- 함수의 반환갑승로 사용할 수 있다.

<br>

함수와 일반 객체의 차이점은 함수는 호출할 수 있다는 것과 일반 객체에는 없는 함수 고유의 프로퍼티를 소유한다는 것이다.

<br>

### 18.2 함수 객체의 프로퍼티

함수는 객체이기 때문에 프로퍼티를 가질 수 있다. 

<img width="229" alt="스크린샷 2023-01-18 오후 8 46 08" src="https://user-images.githubusercontent.com/77482972/213163524-21d44c6a-a62a-46a3-a2e9-2ebde24afb6e.png">

arguments, caller, length, name, prototype 프로퍼티는 함수 객체의 데이터 프로퍼티이고 함수 객체 고유의 프로퍼티이다. `__proto__`는 접근자 프로퍼티이며, Object.prototype의 객체를 상속받은 것이다.

<br>

##### 18.2.1 arguments 프로퍼티

arguments 객체는 함수 호출 시 전달된 **인수들의 정보**를 담고 있는 순회 가능한 유사 배열 객체이다. 함수 내부에서 지역 변수처럼 사용된다. arguments 프로퍼티는 ES3 부터 표준에서 폐지되었다.

<br>

자바스크립트는 함수의 매개변수와 인수의 개수가 일치하는지 확인하지 않는다.
- 매개변수의 개수 > 인수의 개수: 전달되지 않은 매개변수는 undefined로 유지
- 매개변수의 개수 < 인수의 개수: 초과된 인수 무시

<br>

초과된 인수는 버려지는 것이 아니라 arguments 객체의 프로퍼티로 보관된다. arguments 객체는 인수를 프로퍼티 값으로 소유하며 프로퍼티 키는 인수의 순서를 나타낸다.

<img width="317" alt="스크린샷 2023-01-18 오후 8 53 35" src="https://user-images.githubusercontent.com/77482972/213164872-44525c43-e2d8-46a1-8b1d-02d658a3cfaa.png">


- callee 프로퍼티: arguments 객체를 생성한 함수
- length 프로퍼티: 인수의 개수

<br>

자바스크립트는 매개변수의 개수와 인수의 개수를 확인하지 않기 때문에 매개변수 개수를 확정할 수 없는 **가변 인자 함수**를 구현할 때 유용하다. 

```javascript
function sum() {
	let res = 0;

	for (let i = 0; i < arguments.length; i++;) {
		res += arguments[i];
	}
}
```
다만, arguments 객체는 배열이 아니라 **유사 배열 객체**이기 때문에 배열 메서드를 사용할 경우 에러가 발생한다. rest 파라미터로 번거로움을 해결할 수 있다.
> 유사 배열 객체: length 프로퍼티를 가진 객체로 for문으로 순회할 수 있는 객체

<br>

##### 18.2.2 caller 프로퍼티

비표준 프로퍼티이다. 함수 자신을 호출한 함수를 가리킨다.

<br>

##### 18.2.3 length 프로퍼티

함수를 정의할 때 선언한 매개변수의 개수를 가리킨다. **arguments 객체의 length 프로퍼티(인자의 개수)와 함수 객체의 length 프로퍼티 값(매개변수의 개수)은 다를 수 있으므로 주의한다.**

<br>

##### 18.2.4 name 프로퍼티

함수 이름을 나타낸다. 익명함수 표현식인 경우에는 식별자를 값으로 갖는다.(ES5에서는 빈 문자열)

> 함수를 호출할 때는 함수 이름이 아니라 함수 객체를 가리키는 식별자로 호출한다.

<br>

##### 18.2.5 `__proto__` 접근자 프로퍼티

모든 객체는 [[Prototype]]이라는 내부 슬롯을 갖고, `__proto__` 프로퍼티는 [[Prototype]] 내부 슬롯이 가리키는 프로토타입 객체에 접근하기 위해 사용하는 접근자 프로퍼티이다.

<br>

##### 18.2.6 prototype 프로퍼티

생성자 함수로 호출할 수 있는 함수 객체(constructor)만이 소유하는 프로퍼티다. prototype 프로퍼티는 함수가 객체를 생성하는 생성자 함수로 호출될 때, 생성자 함수가 생성할 인스턴스의 프로토타입 객체를 가리킨다.